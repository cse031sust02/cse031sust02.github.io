<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="cse031sust02, programming, code" name="keywords">
<meta content="Talha Ibne Imam" name="author">
<meta property="og:title" content="How I learned to stop panicking and play with NGINX - cse031sust02">
<meta property="og:url" content="https://cse031sust02.github.io/post/getting-started-with-nginx/">
<meta property="og:description" content="A n00b&#39;s rambling journey into the world of programming">
<meta property="og:type" content="website" />
<title>How I learned to stop panicking and play with NGINX | cse031sust02</title>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<link rel="stylesheet" href="https://cse031sust02.github.io//css/style.css">
<link rel="shortcut icon" href="https://cse031sust02.github.io//wave.ico">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">

</head>

<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://cse031sust02.github.io/"><h1 class="title is-4">cse031sust02</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://github.com/cse031sust02" target="_blank">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://twitter.com/cse031sust02" target="_blank">
            <span class="icon">
              <i class="fa fa-twitter"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://www.linkedin.com/in/talhasust/" target="_blank">
            <span class="icon">
              <i class="fa fa-linkedin-square"></i>
            </span>
          </a>
          
          <a class="level-item" href="/index.xml" target="_blank">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h1 class="title">How I learned to stop panicking and play with NGINX</h1>
    <h2 class="subtitle is-5">August 20, 2017 by Talha Ibne Imam</h2>
    
      <div class="tags">
    
        <a class="button is-link" href="/tags/nginx">nginx</a>
    
        <a class="button is-link" href="/tags/web-server">web-server</a>
    
        <a class="button is-link" href="/tags/http">http</a>
    
</div>

    
    <div class="content">
      

<hr />

<h3 id="what-is-nginx">What is Nginx</h3>

<p>Nginx is a high performance web server which is lightweight, free and open-source. It can be used as a standalone <a href="https://youtu.be/XhgUClE5uC0?t=11m13s">web server</a> (like Apache) or as a <a href="https://en.wikipedia.org/wiki/Reverse_proxy">reverse proxy</a> (serve in front of the web servers). Nginx is also used as mail proxy server, load balancer and HTTP cache.</p>

<h5 id="why-use-nginx">Why use Nginx?</h5>

<p>There are other web servers such as Apache, IIS etc. So what makes Nginx special? It is especially good at handling many concurrent connections as it was originally developed to handle <a href="http://www.kegel.com/c10k.html">C10k problem</a> (serving 10000 concurrent connections). Nginx serves requests asynchronously while other web servers (such as Apache, IIS) creates new threads for every request received.</p>

<p>Nginx can also work alognside other web servers as a reverse proxy. Nginx not only serve HTTP &amp; HTTPS protocol but also IMAP, POP3 and SMPT. We can use Nginx on servers with very limited hardware capabilites. A very detailed overview of why we should use Nginx can be found <a href="https://youtu.be/XhgUClE5uC0?t=16m57s">here</a>.</p>

<h3 id="installation">Installation</h3>

<p>There are various ways to download and install Nginx. Please follow <a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/install/">Official Guide</a> to install Nginx on your system.</p>

<p>On Ubuntu, One should be able to install Nginx easily with the <code>apt-get install nginx</code> command.</p>

<p>After installing Nginx, we should see the welcome page by entering the IP address (we can get that using <code>ifconfig</code> command) of our server on a browser.</p>

<h3 id="configuration">Configuration</h3>

<p>For most linux distributions, all Nginx config files are located in <code>/etc/nginx</code> directory.</p>

<p><strong>nginx.conf</strong> is the main configuration file. It is Nginx&rsquo;s main control point which reads in all of the other appropriate configuration files and combines them into a monolithic configuration file when the server starts.</p>

<p>The structure of that configuration file looks like below :</p>

<pre><code>user nobody; 

events {
   ...
}

http {
    ...

    server {
    	...
    }

    server {
    	...
    }
}

stream {
   ...
}
</code></pre>

<p>As we can see, This file consists of <strong>directives</strong> and their parameters. There are two kinds of directives.</p>

<ul>
<li><p><strong>simple directives</strong> : These directives end with a semicolon.</p>

<pre><code>user nobody;
</code></pre></li>

<li><p><strong>contexts</strong> : A few directives group together related directives. Those directives are referred to as contexts. i.e, events, http and server etc.</p></li>
</ul>

<p><em>To know more details about the configuration file and what is the purpose of the each directives, please visit the <a href="https://www.nginx.com/resources/admin-guide/configuration-files/">official guide</a>. This <a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/">example</a> is helpful too.</em></p>

<h4 id="hosting-sites">Hosting Sites</h4>

<p>For hosting websites, we need to understand how to set up virtual servers.</p>

<p>A virtual server is defined by a server directive in the http context.</p>

<pre><code>http {
    server {
        # Server configuration
    }
}
</code></pre>

<p>And it is possible to add multiple virtual servers into the http context.</p>

<pre><code>http {
    server {
        # Server One configuration
    }

    server {
        # Server Two configuration
    }
}
</code></pre>

<p>Now, if we add 10 virtual servers, the <strong>nginx.conf</strong> file will become very long and modifying that file will be a headache. This is why <strong>sites-enabled</strong> folder exists. We can make seperate configuration file for each virtual host. And in the main nginx.conf file, we will include that folder :</p>

<pre><code>http {
    # Virtual Hosts
    include /etc/nginx/sites-enabled/*;
}
</code></pre>

<p>So, now every virtual servers listed in <strong>sites-enabled</strong> folder will be public to visitors.</p>

<p>We usually have to manage many different sites and may need to activate/deactivate any particular site anytime. This is why we use <strong>sites-available</strong> folder for storing all of our virtual host configurations(whether they&rsquo;re currently enabled or not). To enable any particular virtual host, we will symbolically link it&rsquo;s configuration file to <strong>sites-enabled</strong> directory.</p>

<p>I have written another <a href="https://cse031sust02.github.io/post/understanding-nginx-server-block/">post</a> where i tried to explain the server block in details.</p>

<h3 id="reloading-nginx">Reloading Nginx</h3>

<p>Whenever we change the configuration, we will need to restart nginx server for changes to take place.</p>

<pre><code>sudo service nginx restart
</code></pre>

    </div>
    
        <div class="nav-left">
    <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcse031sust02.github.io%2fpost%2fgetting-started-with-nginx%2f" title="Share on Facebook" target="_blank"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
    <a class="nav-item" href="https://plus.google.com/share?url=https%3a%2f%2fcse031sust02.github.io%2fpost%2fgetting-started-with-nginx%2f" title="Share on Google+" target="_blank"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
    <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcse031sust02.github.io%2fpost%2fgetting-started-with-nginx%2f" title="Share on LinkedIn" target="_blank"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
    <a class="nav-item" href="https://twitter.com/home?status=How%20I%20learned%20to%20stop%20panicking%20and%20play%20with%20NGINX - https%3a%2f%2fcse031sust02.github.io%2fpost%2fgetting-started-with-nginx%2f" title="Tweet this" target="_blank"><span class="fa fa-twitter fa-2x"></span></a>
    <a class="nav-item" href="http://www.reddit.com/submit?url=https%3a%2f%2fcse031sust02.github.io%2fpost%2fgetting-started-with-nginx%2f&title=How%20I%20learned%20to%20stop%20panicking%20and%20play%20with%20NGINX" title="Share on Reddit" target="_blank"><span class="fa fa-reddit-alien fa-2x" aria-hidden="true"></span></a>
    
    </div>
    
  </div>
</section>

<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
    <script type="text/javascript">
      var disqus_shortname = 'cse031sust02';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; 2017 cse031sust02 | <a href="https://github.com/mgjohansen/hucore.git" target="_blank">Hucore theme</a> & <a href="http://gohugo.io" target="_blank">Hugo</a> â™¥</p>
  </div>
</section>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js" integrity="sha256-+bhVTaRmJ/c07eV80nU8gD2cBBF0rYkf1txqXlrbvb0=" crossorigin="anonymous"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/php.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/javascript.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-67303858-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>



</body>
